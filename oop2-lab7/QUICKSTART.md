# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ7

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
oop2-lab7/
‚îú‚îÄ‚îÄ README.md                    # –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
‚îú‚îÄ‚îÄ LECTURE_NOTES.md             # –ö–æ–Ω—Å–ø–µ–∫—Ç –ª–µ–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ QUICKSTART.md                # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ pom.xml                      # Maven –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ run.sh                       # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ (Linux/Mac)
‚îú‚îÄ‚îÄ run.bat                      # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ (Windows)
‚îî‚îÄ‚îÄ src/
    ‚îî‚îÄ‚îÄ main/
        ‚îú‚îÄ‚îÄ java/com/akka/lab7/
        ‚îÇ   ‚îú‚îÄ‚îÄ Command.java         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥
        ‚îÇ   ‚îú‚îÄ‚îÄ Increment.java       # –ö–æ–º–∞–Ω–¥–∞ +1
        ‚îÇ   ‚îú‚îÄ‚îÄ PrintValue.java      # –í—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è
        ‚îÇ   ‚îú‚îÄ‚îÄ Reset.java           # –°–±—Ä–æ—Å –≤ 0
        ‚îÇ   ‚îú‚îÄ‚îÄ Add.java             # –î–æ–±–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
        ‚îÇ   ‚îú‚îÄ‚îÄ CounterState.java    # Immutable —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        ‚îÇ   ‚îú‚îÄ‚îÄ CounterActor.java    # –ê–∫—Ç–æ—Ä —Å–æ state machine
        ‚îÇ   ‚îî‚îÄ‚îÄ Main.java            # –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
        ‚îî‚îÄ‚îÄ resources/
            ‚îú‚îÄ‚îÄ application.conf     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Akka
            ‚îî‚îÄ‚îÄ logback.xml          # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**Linux/Mac:**
```bash
cd oop2-lab7
chmod +x run.sh
./run.sh
```

**Windows:**
```cmd
cd oop2-lab7
run.bat
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Maven –Ω–∞–ø—Ä—è–º—É—é

```bash
cd oop2-lab7

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
mvn clean compile

# –ó–∞–ø—É—Å–∫
mvn exec:java
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ IDE

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É `oop2-lab7` –≤ IntelliJ IDEA / Eclipse / VS Code
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Maven
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∞—Å—Å `Main.java`

## –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ

### Main.java –≤—ã–ø–æ–ª–Ω—è–µ—Ç 7 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:

1. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —Ç—Ä–∏ —Ä–∞–∑–∞ Increment
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è** ‚Äî PrintValue (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 3)
3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ** ‚Äî Add(10), –∑–∞—Ç–µ–º PrintValue (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 13)
4. **–ö–æ–º–±–∏–Ω–∞—Ü–∏—è** ‚Äî Increment, Increment, Add(5), PrintValue (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 20)
5. **–°–±—Ä–æ—Å** ‚Äî Reset
6. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞** ‚Äî PrintValue (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0)
7. **–†–∞–±–æ—Ç–∞ –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞** ‚Äî Increment, Add(7), PrintValue (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 8)

**–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:**
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–≤–µ–¥–µ–Ω–∏—è
- Behavior switching
- Immutable state
- –ê–∫—Ç–æ—Ä –∫–∞–∫ FSM

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Java:** 17 –∏–ª–∏ –≤—ã—à–µ
- **Maven:** 3.6 –∏–ª–∏ –≤—ã—à–µ

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π:
```bash
java -version
mvn -version
```

## –ò–∑—É—á–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### –ü–æ—Ä—è–¥–æ–∫ –∏–∑—É—á–µ–Ω–∏—è:

1. **LECTURE_NOTES.md** ‚Äî –∫–æ–Ω—Å–ø–µ–∫—Ç –ª–µ–∫—Ü–∏–∏ —Å —Ç–µ–æ—Ä–∏–µ–π
2. **README.md** ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π
3. **–ö–æ–¥ –≤ –ø–æ—Ä—è–¥–∫–µ:**
   - `Command.java` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - `Increment.java`, `PrintValue.java`, `Reset.java`, `Add.java` ‚Äî –∫–æ–º–∞–Ω–¥—ã
   - `CounterState.java` ‚Äî immutable —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - `CounterActor.java` ‚Äî –∞–∫—Ç–æ—Ä —Å behavior switching
   - `Main.java` ‚Äî —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –∏ –∏–∑—É—á–∏—Ç–µ –≤—ã–≤–æ–¥
5. **–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã** –∏–∑ README.md

## –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (mutable state –≤ –ø–æ–ª–µ)
```java
class CounterActor {
    private int value = 0; // ‚ùå BAD!
    
    Behavior<Command> behavior() {
        return Behaviors.receiveMessage(msg -> {
            value++; // ‚ùå –ú—É—Ç–∞—Ü–∏—è –ø–æ–ª—è
            return Behaviors.same();
        });
    }
}
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä)
```java
class CounterActor {
    static Behavior<Command> create() {
        return behavior(new CounterState(0));
    }
    
    private static Behavior<Command> behavior(CounterState state) {
        return Behaviors.receiveMessage(msg -> {
            if (msg instanceof Increment) {
                CounterState newState = state.increment();
                return behavior(newState); // Behavior switching!
            }
            // ...
        });
    }
}
```

### Immutable State
```java
class CounterState {
    final int value; // final = immutable
    
    // –ú–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ù–û–í–´–ô –æ–±—ä–µ–∫—Ç
    CounterState increment() {
        return new CounterState(value + 1);
    }
}
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
mvn clean

# –¢–æ–ª—å–∫–æ –∫–æ–º–ø–∏–ª—è—Ü–∏—è
mvn compile

# –ó–∞–ø—É—Å–∫
mvn exec:java

# –°–æ–∑–¥–∞–Ω–∏–µ JAR
mvn package
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Maven –Ω–µ –Ω–∞–π–¥–µ–Ω"
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Maven: https://maven.apache.org/install.html

### –û—à–∏–±–∫–∞: "Java version is too old"
–û–±–Ω–æ–≤–∏—Ç–µ Java –¥–æ –≤–µ—Ä—Å–∏–∏ 17 –∏–ª–∏ –≤—ã—à–µ

### –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```bash
mvn clean compile -U
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞:

1. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `Decrement` ‚Äî —É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞ 1
2. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `Multiply(int factor)` ‚Äî —É–º–Ω–æ–∂–µ–Ω–∏–µ
3. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `GetValue(ActorRef<Response> replyTo)` ‚Äî –æ—Ç–≤–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ–º
4. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É: value –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º
5. –°–æ–∑–¥–∞–π—Ç–µ `HistoryActor` ‚Äî —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–∂–µ—Ç–µ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞:
1. –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è —Ö—Ä–∞–Ω–∏—Ç—å state –≤ –ø–æ–ª—è—Ö –∞–∫—Ç–æ—Ä–∞?
2. –ß—Ç–æ —Ç–∞–∫–æ–µ behavior switching?
3. –ß–µ–º –∞–∫—Ç–æ—Ä –ø–æ—Ö–æ–∂ –Ω–∞ state machine?
4. –ü–æ—á–µ–º—É state –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å immutable?
5. –ö–∞–∫ behavior —Å–≤—è–∑–∞–Ω —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º?

–û—Ç–≤–µ—Ç—ã –≤ [README.md](README.md)

---

## –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π

**–°–æ—Å—Ç–æ—è–Ω–∏–µ = –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–≤–µ–¥–µ–Ω–∏—è, –∞ –Ω–µ –ø–æ–ª–µ –∫–ª–∞—Å—Å–∞!**

```java
// –ù–ï–¢ –ø–æ–ª–µ–π –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
private static Behavior<Command> behavior(CounterState state) {
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä
    // –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ‚Üí –Ω–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
    return behavior(newState); // Behavior switching!
}
```

---

**–£–¥–∞—á–∏ –≤ –æ—Å–≤–æ–µ–Ω–∏–∏ state management –≤ –∞–∫—Ç–æ—Ä–∞—Ö! üéì**
